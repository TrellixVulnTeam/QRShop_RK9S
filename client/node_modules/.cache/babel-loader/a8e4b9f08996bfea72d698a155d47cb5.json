{"remainingRequest":"D:\\Tran_Hieu\\LEARN\\JS\\woodshop\\client\\node_modules\\babel-loader\\lib\\index.js!D:\\Tran_Hieu\\LEARN\\JS\\woodshop\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Tran_Hieu\\LEARN\\JS\\woodshop\\client\\src\\plugins\\VueClient.js","dependencies":[{"path":"D:\\Tran_Hieu\\LEARN\\JS\\woodshop\\client\\src\\plugins\\VueClient.js","mtime":1621254940909},{"path":"D:\\Tran_Hieu\\LEARN\\JS\\woodshop\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621211552621},{"path":"D:\\Tran_Hieu\\LEARN\\JS\\woodshop\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1621211551883},{"path":"D:\\Tran_Hieu\\LEARN\\JS\\woodshop\\client\\node_modules\\eslint-loader\\index.js","mtime":1621211554261}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOi9UcmFuX0hpZXUvTEVBUk4vSlMvd29vZHNob3AvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Cgp2YXIgQ2xpZW50ID0gZnVuY3Rpb24gQ2xpZW50KHZ1ZSkgewogIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGllbnQpOwoKICB0aGlzLnN1YnNjcmliZXJzID0ge307CiAgdGhpcy5DbGllbnRJRCA9ICIiOwogIHRoaXMuVnVlID0gdnVlOwogIHRoaXMud2Vic29ja2V0ID0gbnVsbDsKICB0aGlzLlVzZXJJbmZvID0gewogICAgSUQ6ICIiLAogICAgVXNlck5hbWU6ICIiLAogICAgRW1haWw6ICIiCiAgfTsKICB0aGlzLlRva2VuID0gbnVsbDsKCiAgQ2xpZW50LnByb3RvdHlwZS5Jbml0ID0gZnVuY3Rpb24gKG9iaikgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBpZiAodGhpcy5DbGllbnRJRCA9PSAiIikgewogICAgICB0aGlzLkNsaWVudElEID0gIkNJRCIgKyBwYXJzZUludChNYXRoLnJhbmRvbSgpICogOTkpLnRvU3RyaW5nKCkgKyBEYXRlLm5vdygpLnRvU3RyaW5nKCk7CiAgICB9CgogICAgaWYgKG9iai5TZXJ2ZXJJUCAmJiBvYmouUG9ydCkgewogICAgICB0aGlzLndlYnNvY2tldCA9IG5ldyBXZWJTb2NrZXQoIndzOi8vIi5jb25jYXQob2JqLlNlcnZlcklQLCAiOiIpLmNvbmNhdChvYmouUG9ydCkpOwogICAgICB0aGlzLndlYnNvY2tldC5DbGllbnRJRCA9IHRoaXMuQ2xpZW50SUQ7CiAgICB9CgogICAgaWYgKG9iai5Pbk1lc3NhZ2UpIHsKICAgICAgdGhpcy53ZWJzb2NrZXQub25tZXNzYWdlID0gb2JqLk9uTWVzc2FnZTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMud2Vic29ja2V0Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coIkdldD5fIi5jb25jYXQoZS5kYXRhKSk7CiAgICAgICAgdmFyIGQgPSBKU09OLnBhcnNlKGUuZGF0YSk7CgogICAgICAgIF90aGlzLnB1Ymxpc2goZC5NZXNzYWdlSUQsIGQpOwogICAgICB9OwogICAgfQoKICAgIGlmIChvYmouT25PcGVuKSB7CiAgICAgIHRoaXMud2Vic29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coIm9uT3Blbjpjb25uZXRpb24gb3BlbiIpOwogICAgICAgIG9iai5Pbk9wZW4oZSk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICB0aGlzLndlYnNvY2tldC5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coIm9uT3Blbjpjb25uZXRpb24gb3BlbiIpOwogICAgICB9OwogICAgfQoKICAgIGlmIChvYmouT25DbG9zZSkgewogICAgICB0aGlzLndlYnNvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJvbkNsb3NlOmNvbm5ldGlvbiBjbG9zZSIpOwogICAgICAgIG9iai5PbkNsb3NlKCk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICB2YXIgc2VmdCA9IHRoaXMuVnVlOwoKICAgICAgdGhpcy53ZWJzb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coc2VmdC5zd2FsKCkpOwogICAgICAgIGNvbnNvbGUubG9nKCJvbkNsb3NlOmNvbm5ldGlvbiBjbG9zZSIpOwogICAgICAgIHNlZnQuc3dhbC5maXJlKHsKICAgICAgICAgIGljb246ICJlcnJvciIsCiAgICAgICAgICB0aXRsZTogIkNvbm5ldGlvbiBjbG9zZS4uLiIsCiAgICAgICAgICB0ZXh0OiAiVGhlIHNlcnZlciBjb25uZWN0aW9uIGNsb3NlOyIgKyBlLnJlYXNvbgogICAgICAgIH0sIGZ1bmN0aW9uICgpIHsvL3BhcmVudC53aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9CiAgfTsKCiAgQ2xpZW50LnByb3RvdHlwZS5DYWxsRnVuY3Rpb24gPSBmdW5jdGlvbiAoQ2xhc3NOYW1lLCBGdW5jdGlvbk5hbWUsIERhdGEsIENhbGxCYWNrLCBNZXNzYWdlSUQpIHsKICAgIE1lc3NhZ2VJRCA9IE1lc3NhZ2VJRCA/IE1lc3NhZ2VJRCA6ICJNU0dJRCIgKyBwYXJzZUludChNYXRoLnJhbmRvbSgpICogOTkpLnRvU3RyaW5nKCkgKyBEYXRlLm5vdygpLnRvU3RyaW5nKCk7CgogICAgaWYgKENhbGxCYWNrICE9IG51bGwgJiYgQ2FsbEJhY2sgIT0gdW5kZWZpbmVkKSB7CiAgICAgIHRoaXMuc3Vic2NyaWJlKE1lc3NhZ2VJRCwgZnVuY3Rpb24gKGQpIHsKICAgICAgICBDYWxsQmFjayhkKTsKICAgICAgfSk7CiAgICB9CgogICAgdmFyIGRhdGEgPSB7CiAgICAgIFRva2VuOiB0aGlzLlRva2VuLAogICAgICBDbGllbnRJRDogdGhpcy5DbGllbnRJRCwKICAgICAgTWVzc2FnZUlEOiBNZXNzYWdlSUQsCiAgICAgIENsYXNzOiBDbGFzc05hbWUsCiAgICAgIEZ1bmN0aW9uOiBGdW5jdGlvbk5hbWUsCiAgICAgIERhdGE6IERhdGEKICAgIH07CgogICAgaWYgKHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT0gMSkgewogICAgICB2YXIganNvblN0ciA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOwogICAgICBjb25zb2xlLmxvZygiU2VuZD5fIiArIGpzb25TdHIpOwogICAgICB0aGlzLndlYnNvY2tldC5zZW5kKGpzb25TdHIpOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coIkVycm9yPl8gV2ViU29ja2V0IG5vdCByZWFkeSxTdGF0ZToiICsgdGhpcy53ZWJzb2NrZXQucmVhZHlTdGF0ZSk7CiAgICB9CiAgfTsKCiAgQ2xpZW50LnByb3RvdHlwZS5Mb2dpbiA9IGZ1bmN0aW9uIChFbWFpbCwgUGFzc3dvcmQsIENhbGxCYWNrKSB7CiAgICB0aGlzLkNhbGxGdW5jdGlvbigiVXNlck1hbmFnZXIiLCAiTG9naW4iLCB7CiAgICAgIGVtYWlsOiBFbWFpbCwKICAgICAgcGFzc3dvcmQ6IFBhc3N3b3JkCiAgICB9LCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS5TdGF0dXMgPT0gIlBhc3MiKSB7CiAgICAgICAgdGhpcy5TZXRUb2tlbihlLkRhdGEuYWNjZXNzVG9rZW4pOwogICAgICAgIHRoaXMuU2V0VXNlckluZm8oZS5EYXRhLlVzZXJJbmZvKTsKICAgICAgfQoKICAgICAgQ2FsbEJhY2soZSk7CiAgICB9LmJpbmQodGhpcykpOwogIH07CgogIENsaWVudC5wcm90b3R5cGUuTG9nb3V0ID0gZnVuY3Rpb24gKENhbGxCYWNrKSB7CiAgICB0aGlzLkNhbGxGdW5jdGlvbigiVXNlck1hbmFnZXIiLCAiTG9nb3V0IiwgewogICAgICBUT0tFTjogdGhpcy5Ub2tlbgogICAgfSwgZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUuU3RhdHVzID09ICJQYXNzIikgewogICAgICAgIHRoaXMuU2V0VG9rZW4obnVsbCk7CiAgICAgICAgdGhpcy5TZXRVc2VySW5mbyhudWxsKTsKICAgICAgfQoKICAgICAgQ2FsbEJhY2soZSk7CiAgICB9LmJpbmQodGhpcykpOwogIH07CgogIENsaWVudC5wcm90b3R5cGUuU2V0VG9rZW4gPSBmdW5jdGlvbiAoVG9rZW4pIHsKICAgIHRoaXMuVG9rZW4gPSBUb2tlbjsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJUb2tlbiIsIFRva2VuKTsKICB9OwoKICBDbGllbnQucHJvdG90eXBlLlNldFVzZXJJbmZvID0gZnVuY3Rpb24gKFVzZXJJbmZvKSB7CiAgICBpZiAoVXNlckluZm8pIHsKICAgICAgdGhpcy5Vc2VySW5mby5JRCA9IFVzZXJJbmZvLklEOwogICAgICB0aGlzLlVzZXJJbmZvLlVzZXJOYW1lID0gVXNlckluZm8uVXNlck5hbWU7CiAgICAgIHRoaXMuVXNlckluZm8uRW1haWwgPSBVc2VySW5mby5FbWFpbDsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuVXNlckluZm8uSUQgPSBudWxsOwogICAgICB0aGlzLlVzZXJJbmZvLlVzZXJOYW1lID0gbnVsbDsKICAgICAgdGhpcy5Vc2VySW5mby5FbWFpbCA9IG51bGw7CiAgICB9CiAgfTsKCiAgQ2xpZW50LnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7CiAgICBpZiAoIXRoaXMuc3Vic2NyaWJlcnNbZXZlbnRdKSB7CiAgICAgIHRoaXMuc3Vic2NyaWJlcnNbZXZlbnRdID0gW107CiAgICB9CgogICAgdGhpcy5zdWJzY3JpYmVyc1tldmVudF0ucHVzaChjYWxsYmFjaykgLSAxOwogIH07CgogIENsaWVudC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGRlbGV0ZSB0aGlzLnN1YnNjcmliZXJzW2V2ZW50XTsKICB9OwoKICBDbGllbnQucHJvdG90eXBlLnB1Ymxpc2ggPSBmdW5jdGlvbiAoZXZlbnQsIGRhdGEpIHsKICAgIGlmICghdGhpcy5zdWJzY3JpYmVyc1tldmVudF0pIHJldHVybjsKICAgIHRoaXMuc3Vic2NyaWJlcnNbZXZlbnRdLmZvckVhY2goZnVuY3Rpb24gKHN1YnNjcmliZXJDYWxsYmFjaykgewogICAgICByZXR1cm4gc3Vic2NyaWJlckNhbGxiYWNrKGRhdGEpOwogICAgfSk7CiAgICBkZWxldGUgdGhpcy5zdWJzY3JpYmVyc1tldmVudF07CiAgfTsKCiAgQ2xpZW50LnByb3RvdHlwZS5wdWJsaXNoTW9yZVRpbWUgPSBmdW5jdGlvbiAoZXZlbnQsIGRhdGEpIHsKICAgIGlmICghdGhpcy5zdWJzY3JpYmVyc1tldmVudF0pIHJldHVybjsKICAgIHRoaXMuc3Vic2NyaWJlcnNbZXZlbnRdLmZvckVhY2goZnVuY3Rpb24gKHN1YnNjcmliZXJDYWxsYmFjaykgewogICAgICByZXR1cm4gc3Vic2NyaWJlckNhbGxiYWNrKGRhdGEpOwogICAgfSk7CiAgfTsKCiAgdGhpcy5Jbml0KHsKICAgIFNlcnZlcklQOiAibG9jYWxob3N0IiwKICAgIFBvcnQ6ICIzMDAwIgogIH0pOwp9OwoKZXhwb3J0IGRlZmF1bHQgQ2xpZW50Ow=="},{"version":3,"sources":["D:/Tran_Hieu/LEARN/JS/woodshop/client/src/plugins/VueClient.js"],"names":["Client","vue","subscribers","ClientID","Vue","websocket","UserInfo","ID","UserName","Email","Token","prototype","Init","obj","parseInt","Math","random","toString","Date","now","ServerIP","Port","WebSocket","OnMessage","onmessage","e","console","log","data","d","JSON","parse","publish","MessageID","OnOpen","onopen","OnClose","onclose","seft","swal","fire","icon","title","text","reason","CallFunction","ClassName","FunctionName","Data","CallBack","undefined","subscribe","Class","Function","readyState","jsonStr","stringify","send","Login","Password","email","password","Status","SetToken","accessToken","SetUserInfo","bind","Logout","TOKEN","localStorage","setItem","event","callback","push","unsubscribe","forEach","subscriberCallback","publishMoreTime"],"mappings":"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","sourcesContent":["class Client {\r\n  constructor(vue) {\r\n    this.subscribers = {};\r\n    this.ClientID = \"\";\r\n    this.Vue = vue;\r\n    this.websocket = null;\r\n    this.UserInfo = {\r\n      ID: \"\",\r\n      UserName: \"\",\r\n      Email: \"\",\r\n    };\r\n    this.Token = null;\r\n    Client.prototype.Init = function (obj) {\r\n      if (this.ClientID == \"\") {\r\n        this.ClientID =\r\n          \"CID\" +\r\n          parseInt(Math.random() * 99).toString() +\r\n          Date.now().toString();\r\n      }\r\n      if (obj.ServerIP && obj.Port) {\r\n        this.websocket = new WebSocket(`ws://${obj.ServerIP}:${obj.Port}`);\r\n        this.websocket.ClientID = this.ClientID;\r\n      }\r\n      if (obj.OnMessage) {\r\n        this.websocket.onmessage = obj.OnMessage;\r\n      } else {\r\n        this.websocket.onmessage = (e) => {\r\n          console.log(`Get>_${e.data}`);\r\n          var d = JSON.parse(e.data);\r\n          this.publish(d.MessageID, d);\r\n        };\r\n      }\r\n      if (obj.OnOpen) {\r\n        this.websocket.onopen = function (e) {\r\n          console.log(`onOpen:connetion open`);\r\n          obj.OnOpen(e);\r\n        };\r\n      } else {\r\n        this.websocket.onopen = function () {\r\n          console.log(`onOpen:connetion open`);\r\n        };\r\n      }\r\n      if (obj.OnClose) {\r\n        this.websocket.onclose = function () {\r\n          console.log(`onClose:connetion close`);\r\n          obj.OnClose();\r\n        };\r\n      } else {\r\n        let seft = this.Vue;\r\n        this.websocket.onclose = function (e) {\r\n          console.log(seft.swal());\r\n          console.log(\"onClose:connetion close\");\r\n          seft.swal.fire(\r\n            {\r\n              icon: \"error\",\r\n              title: \"Connetion close...\",\r\n              text: \"The server connection close;\" + e.reason,\r\n            },\r\n            function () {\r\n              //parent.window.location.reload();\r\n            }\r\n          );\r\n        };\r\n      }\r\n    };\r\n    Client.prototype.CallFunction = function (ClassName, FunctionName, Data, CallBack, MessageID) {\r\n      MessageID = MessageID ? MessageID : \"MSGID\" + parseInt(Math.random() * 99).toString() + Date.now().toString();\r\n      if (CallBack != null && CallBack != undefined) {\r\n        this.subscribe(MessageID, function (d) {\r\n          CallBack(d);\r\n        });\r\n      }\r\n      var data = { Token: this.Token, ClientID: this.ClientID, MessageID: MessageID, Class: ClassName, Function: FunctionName, Data: Data, };\r\n      if (this.websocket.readyState == 1) {\r\n        var jsonStr = JSON.stringify(data);\r\n        console.log(\"Send>_\" + jsonStr);\r\n        this.websocket.send(jsonStr);\r\n      } else {\r\n        console.log(\r\n          \"Error>_ WebSocket not ready,State:\" + this.websocket.readyState\r\n        );\r\n      }\r\n    };\r\n    Client.prototype.Login = function (Email, Password, CallBack) {\r\n      this.CallFunction(\"UserManager\", \"Login\", { email: Email, password: Password }, function (e) {\r\n        if (e.Status == \"Pass\") {\r\n          this.SetToken(e.Data.accessToken);\r\n          this.SetUserInfo(e.Data.UserInfo);\r\n        }\r\n        CallBack(e);\r\n      }.bind(this));\r\n    };\r\n    Client.prototype.Logout = function (CallBack) {\r\n      this.CallFunction(\"UserManager\", \"Logout\", { TOKEN: this.Token }, function (e) {\r\n        if (e.Status == \"Pass\") {\r\n          this.SetToken(null);\r\n          this.SetUserInfo(null);\r\n        }\r\n        CallBack(e);\r\n      }.bind(this))\r\n    };\r\n    Client.prototype.SetToken = function (Token) {\r\n      this.Token = Token;\r\n      localStorage.setItem(\"Token\", Token);\r\n    };\r\n    Client.prototype.SetUserInfo = function (UserInfo) {\r\n      if (UserInfo) {\r\n        this.UserInfo.ID = UserInfo.ID;\r\n        this.UserInfo.UserName = UserInfo.UserName;\r\n        this.UserInfo.Email = UserInfo.Email;\r\n      }\r\n      else {\r\n        this.UserInfo.ID = null;\r\n        this.UserInfo.UserName = null;\r\n        this.UserInfo.Email = null;\r\n      }\r\n    };\r\n    Client.prototype.subscribe = function (event, callback) {\r\n      if (!this.subscribers[event]) {\r\n        this.subscribers[event] = [];\r\n      }\r\n      this.subscribers[event].push(callback) - 1;\r\n    };\r\n    Client.prototype.unsubscribe = function (event) {\r\n      delete this.subscribers[event];\r\n    };\r\n    Client.prototype.publish = function (event, data) {\r\n      if (!this.subscribers[event]) return;\r\n      this.subscribers[event].forEach((subscriberCallback) =>\r\n        subscriberCallback(data)\r\n      );\r\n      delete this.subscribers[event];\r\n    };\r\n    Client.prototype.publishMoreTime = function (event, data) {\r\n      if (!this.subscribers[event]) return;\r\n      this.subscribers[event].forEach((subscriberCallback) =>\r\n        subscriberCallback(data)\r\n      );\r\n    };\r\n\r\n    this.Init({ ServerIP: \"localhost\", Port: \"3000\" });\r\n  }\r\n}\r\nexport default Client;\r\n"]}]}