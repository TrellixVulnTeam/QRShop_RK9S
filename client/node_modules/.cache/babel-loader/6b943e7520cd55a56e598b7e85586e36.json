{"remainingRequest":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\babel-loader\\lib\\index.js!D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\2021_Project\\Nodejs\\QRShop\\client\\src\\plugins\\VueClient.js","dependencies":[{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\src\\plugins\\VueClient.js","mtime":1622455990210},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOi8yMDIxX1Byb2plY3QvTm9kZWpzL1FSU2hvcC9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKCnZhciBDbGllbnQgPSBmdW5jdGlvbiBDbGllbnQodnVlLCBvbk9wZW4pIHsKICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2xpZW50KTsKCiAgdGhpcy5zdWJzY3JpYmVycyA9IHt9OwogIHRoaXMuQ2xpZW50SUQgPSAiIjsKICB0aGlzLlZ1ZSA9IHZ1ZTsKICB0aGlzLndlYnNvY2tldCA9IG51bGw7CiAgdGhpcy5Vc2VySW5mbyA9IHsKICAgIElEOiAiIiwKICAgIExldmVsOiBudWxsLAogICAgVXNlck5hbWU6ICIiLAogICAgRW1haWw6ICIiCiAgfTsKICB0aGlzLlRva2VuID0gbnVsbDsKICB0aGlzLk9uT3BlbiA9IG9uT3BlbjsKICB0aGlzLklzT3BlbiA9IGZhbHNlOwoKICBDbGllbnQucHJvdG90eXBlLkluaXQgPSBmdW5jdGlvbiAob2JqKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGlmICh0aGlzLkNsaWVudElEID09ICIiKSB7CiAgICAgIHRoaXMuQ2xpZW50SUQgPSAiQ0lEIiArIHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiA5OSkudG9TdHJpbmcoKSArIERhdGUubm93KCkudG9TdHJpbmcoKTsKICAgIH0KCiAgICBpZiAob2JqLlNlcnZlcklQICYmIG9iai5Qb3J0KSB7CiAgICAgIHRoaXMud2Vic29ja2V0ID0gbmV3IFdlYlNvY2tldCgid3M6Ly8iLmNvbmNhdChvYmouU2VydmVySVAsICI6IikuY29uY2F0KG9iai5Qb3J0KSk7CiAgICAgIHRoaXMud2Vic29ja2V0LkNsaWVudElEID0gdGhpcy5DbGllbnRJRDsKICAgIH0KCiAgICBpZiAob2JqLk9uTWVzc2FnZSkgewogICAgICB0aGlzLndlYnNvY2tldC5vbm1lc3NhZ2UgPSBvYmouT25NZXNzYWdlOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy53ZWJzb2NrZXQub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygiR2V0Pl8iLmNvbmNhdChlLmRhdGEpKTsKICAgICAgICB2YXIgZCA9IEpTT04ucGFyc2UoZS5kYXRhKTsKCiAgICAgICAgX3RoaXMucHVibGlzaChkLk1lc3NhZ2VJRCwgZCk7CiAgICAgIH07CiAgICB9CgogICAgaWYgKG9iai5Pbk9wZW4pIHsKICAgICAgdGhpcy53ZWJzb2NrZXQub25vcGVuID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygib25PcGVuOmNvbm5ldGlvbiBvcGVuIik7CiAgICAgICAgb2JqLk9uT3BlbihlKTsKICAgICAgICB0aGlzLklzT3BlbiA9IHRydWU7CiAgICAgIH0uYmluZCh0aGlzKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMud2Vic29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygib25PcGVuOmNvbm5ldGlvbiBvcGVuIik7CiAgICAgICAgdGhpcy5Jc09wZW4gPSB0cnVlOwogICAgICB9LmJpbmQodGhpcyk7CiAgICB9CgogICAgaWYgKG9iai5PbkNsb3NlKSB7CiAgICAgIHRoaXMud2Vic29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coIm9uQ2xvc2U6Y29ubmV0aW9uIGNsb3NlIik7CiAgICAgICAgb2JqLk9uQ2xvc2UoKTsKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBzZWZ0ID0gdGhpcy5WdWU7CgogICAgICB0aGlzLndlYnNvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygib25DbG9zZTpjb25uZXRpb24gY2xvc2UiKTsKICAgICAgICBzZWZ0LnByb3RvdHlwZS4kbGF5ZXIuYWxlcnQoIlRoZSBzZXJ2ZXIgY29ubmVjdGlvbiBjbG9zZTsiICsgZS5yZWFzb24sIHsKICAgICAgICAgIHRpdGxlOiAnQ29ubmV0aW9uIGNsb3NlLi4uJywKICAgICAgICAgIGljb246IDEsCiAgICAgICAgICAvLzAsMSwyLDMKICAgICAgICAgIGJ0bjogWydPSyddCiAgICAgICAgfSwgZnVuY3Rpb24gKGxheWVyaWQpIHsKICAgICAgICAgIHNlZnQucHJvdG90eXBlLiRsYXllci5jbG9zZShsYXllcmlkKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgIH0KICB9OwoKICBDbGllbnQucHJvdG90eXBlLkNhbGxGdW5jdGlvbiA9IGZ1bmN0aW9uIChDbGFzc05hbWUsIEZ1bmN0aW9uTmFtZSwgRGF0YSwgQ2FsbEJhY2ssIE1lc3NhZ2VJRCkgewogICAgTWVzc2FnZUlEID0gTWVzc2FnZUlEID8gTWVzc2FnZUlEIDogIk1TR0lEIiArIHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiA5OSkudG9TdHJpbmcoKSArIERhdGUubm93KCkudG9TdHJpbmcoKTsKCiAgICBpZiAoQ2FsbEJhY2sgIT0gbnVsbCAmJiBDYWxsQmFjayAhPSB1bmRlZmluZWQpIHsKICAgICAgdGhpcy5zdWJzY3JpYmUoTWVzc2FnZUlELCBmdW5jdGlvbiAoZCkgewogICAgICAgIENhbGxCYWNrKGQpOwogICAgICB9KTsKICAgIH0KCiAgICB2YXIgZGF0YSA9IHsKICAgICAgVG9rZW46IHRoaXMuVG9rZW4sCiAgICAgIENsaWVudElEOiB0aGlzLkNsaWVudElELAogICAgICBNZXNzYWdlSUQ6IE1lc3NhZ2VJRCwKICAgICAgQ2xhc3M6IENsYXNzTmFtZSwKICAgICAgRnVuY3Rpb246IEZ1bmN0aW9uTmFtZSwKICAgICAgRGF0YTogRGF0YQogICAgfTsKCiAgICBpZiAodGhpcy53ZWJzb2NrZXQucmVhZHlTdGF0ZSA9PSAxKSB7CiAgICAgIHZhciBqc29uU3RyID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7CiAgICAgIGNvbnNvbGUubG9nKCJTZW5kPl8iICsganNvblN0cik7CiAgICAgIHRoaXMud2Vic29ja2V0LnNlbmQoanNvblN0cik7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygiRXJyb3I+XyBXZWJTb2NrZXQgbm90IHJlYWR5LFN0YXRlOiIgKyB0aGlzLndlYnNvY2tldC5yZWFkeVN0YXRlKTsKICAgIH0KICB9OwoKICBDbGllbnQucHJvdG90eXBlLkxvZ2luID0gZnVuY3Rpb24gKEVtYWlsLCBQYXNzd29yZCwgQ2FsbEJhY2spIHsKICAgIHRoaXMuQ2FsbEZ1bmN0aW9uKCJVc2VyTWFuYWdlciIsICJMb2dpbiIsIHsKICAgICAgZW1haWw6IEVtYWlsLAogICAgICBwYXNzd29yZDogUGFzc3dvcmQKICAgIH0sIGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlLlN0YXR1cyA9PSAiUGFzcyIpIHsKICAgICAgICB0aGlzLlNldFRva2VuKGUuRGF0YS5hY2Nlc3NUb2tlbik7CiAgICAgICAgdGhpcy5TZXRVc2VySW5mbyhlLkRhdGEuVXNlckluZm8pOwogICAgICB9CgogICAgICBDYWxsQmFjayhlKTsKICAgIH0uYmluZCh0aGlzKSk7CiAgfTsKCiAgQ2xpZW50LnByb3RvdHlwZS5Mb2dvdXQgPSBmdW5jdGlvbiAoQ2FsbEJhY2spIHsKICAgIHRoaXMuQ2FsbEZ1bmN0aW9uKCJVc2VyTWFuYWdlciIsICJMb2dvdXQiLCB7CiAgICAgIFRPS0VOOiB0aGlzLlRva2VuCiAgICB9LCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS5TdGF0dXMgPT0gIlBhc3MiKSB7CiAgICAgICAgdGhpcy5TZXRUb2tlbihudWxsKTsKICAgICAgICB0aGlzLlNldFVzZXJJbmZvKG51bGwpOwogICAgICB9CgogICAgICBDYWxsQmFjayhlKTsKICAgIH0uYmluZCh0aGlzKSk7CiAgfTsKCiAgQ2xpZW50LnByb3RvdHlwZS5TZXRUb2tlbiA9IGZ1bmN0aW9uIChUb2tlbikgewogICAgdGhpcy5Ub2tlbiA9IFRva2VuOwogICAgdGhpcy5WdWUuJGNvb2tpZXMuc2V0KCJUb2tlbiIsIFRva2VuLCAiMWgiKTsKICB9OwoKICBDbGllbnQucHJvdG90eXBlLlNldFVzZXJJbmZvID0gZnVuY3Rpb24gKFVzZXJJbmZvKSB7CiAgICBpZiAoVXNlckluZm8pIHsKICAgICAgdGhpcy5Vc2VySW5mby5JRCA9IFVzZXJJbmZvLklEOwogICAgICB0aGlzLlVzZXJJbmZvLlVzZXJOYW1lID0gVXNlckluZm8uVXNlck5hbWU7CiAgICAgIHRoaXMuVXNlckluZm8uRW1haWwgPSBVc2VySW5mby5FbWFpbDsKICAgICAgdGhpcy5Vc2VySW5mby5MZXZlbCA9IFVzZXJJbmZvLkxldmVsOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5Vc2VySW5mby5JRCA9IG51bGw7CiAgICAgIHRoaXMuVXNlckluZm8uVXNlck5hbWUgPSBudWxsOwogICAgICB0aGlzLlVzZXJJbmZvLkVtYWlsID0gbnVsbDsKICAgICAgdGhpcy5Vc2VySW5mby5MZXZlbCA9IG51bGw7CiAgICB9CiAgfTsKCiAgQ2xpZW50LnByb3RvdHlwZS5DaGVja1Rva2VuID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICB2YXIgQ0tUSyA9IHRoaXMuVnVlLiRjb29raWVzLmdldCgiVG9rZW4iKTsKICAgIHRoaXMuQ2FsbEZ1bmN0aW9uKCJVc2VyTWFuYWdlciIsICJDaGVja1Rva2VuIiwgewogICAgICBUb2tlbjogQ0tUSwogICAgfSwgZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUuU3RhdHVzID09ICJQYXNzIikgewogICAgICAgIHRoaXMuU2V0VG9rZW4oQ0tUSyk7CiAgICAgICAgdGhpcy5TZXRVc2VySW5mbyhlLkRhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuU2V0VG9rZW4obnVsbCk7CiAgICAgICAgdGhpcy5TZXRVc2VySW5mbyhudWxsKTsKICAgICAgfQoKICAgICAgY2FsbGJhY2soZSk7CiAgICB9LmJpbmQodGhpcykpOwogIH07CgogIENsaWVudC5wcm90b3R5cGUuQ2hlY2tQZXJtaXNzaW9uID0gZnVuY3Rpb24gKFVybCwgQ2FsbGJhY2spIHsKICAgIHRoaXMuQ2FsbEZ1bmN0aW9uKCJVc2VyTWFuYWdlciIsICJDaGVja1Blcm1pc3Npb24iLCB7CiAgICAgIFVzZXJOYW1lOiB0aGlzLlVzZXJJbmZvLlVzZXJOYW1lLAogICAgICBVcmw6IFVybAogICAgfSwgZnVuY3Rpb24gKGUpIHsKICAgICAgQ2FsbGJhY2soZSk7CgogICAgICBpZiAoZS5TdGF0dXMgPT0gIkZhaWwiKSB7CiAgICAgICAgdGhpcy5WdWUuc3dhbC5maXJlKHsKICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgcG9zaXRpb246ICJ0b3AtZW5kIiwKICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgIHRpbWVyOiAxNTAwLAogICAgICAgICAgaWNvbjogIndhcm5pbmciLAogICAgICAgICAgdGl0bGU6ICJTb3JyeSwgeW91IGRvbid0IGhhdmUgIHBlcm1pc3Npb24iCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0uYmluZCh0aGlzKSk7CiAgfTsKCiAgQ2xpZW50LnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7CiAgICBpZiAoIXRoaXMuc3Vic2NyaWJlcnNbZXZlbnRdKSB7CiAgICAgIHRoaXMuc3Vic2NyaWJlcnNbZXZlbnRdID0gW107CiAgICB9CgogICAgdGhpcy5zdWJzY3JpYmVyc1tldmVudF0ucHVzaChjYWxsYmFjaykgLSAxOwogIH07CgogIENsaWVudC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGRlbGV0ZSB0aGlzLnN1YnNjcmliZXJzW2V2ZW50XTsKICB9OwoKICBDbGllbnQucHJvdG90eXBlLnB1Ymxpc2ggPSBmdW5jdGlvbiAoZXZlbnQsIGRhdGEpIHsKICAgIGlmICghdGhpcy5zdWJzY3JpYmVyc1tldmVudF0pIHJldHVybjsKICAgIHRoaXMuc3Vic2NyaWJlcnNbZXZlbnRdLmZvckVhY2goZnVuY3Rpb24gKHN1YnNjcmliZXJDYWxsYmFjaykgewogICAgICByZXR1cm4gc3Vic2NyaWJlckNhbGxiYWNrKGRhdGEpOwogICAgfSk7CiAgICBkZWxldGUgdGhpcy5zdWJzY3JpYmVyc1tldmVudF07CiAgfTsKCiAgQ2xpZW50LnByb3RvdHlwZS5wdWJsaXNoTW9yZVRpbWUgPSBmdW5jdGlvbiAoZXZlbnQsIGRhdGEpIHsKICAgIGlmICghdGhpcy5zdWJzY3JpYmVyc1tldmVudF0pIHJldHVybjsKICAgIHRoaXMuc3Vic2NyaWJlcnNbZXZlbnRdLmZvckVhY2goZnVuY3Rpb24gKHN1YnNjcmliZXJDYWxsYmFjaykgewogICAgICByZXR1cm4gc3Vic2NyaWJlckNhbGxiYWNrKGRhdGEpOwogICAgfSk7CiAgfTsKCiAgQ2xpZW50LnByb3RvdHlwZS5zbGVlcCA9IGZ1bmN0aW9uIChNaWxsaXMpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlLCBNaWxsaXMpOwogICAgfSk7CiAgfTsKCiAgdGhpcy5Jbml0KHsKICAgIFNlcnZlcklQOiAibG9jYWxob3N0IiwKICAgIFBvcnQ6ICIzMDAwIiwKICAgIE9uT3BlbjogdGhpcy5Pbk9wZW4KICB9KTsKfTsKCmV4cG9ydCBkZWZhdWx0IENsaWVudDs="},{"version":3,"sources":["D:/2021_Project/Nodejs/QRShop/client/src/plugins/VueClient.js"],"names":["Client","vue","onOpen","subscribers","ClientID","Vue","websocket","UserInfo","ID","Level","UserName","Email","Token","OnOpen","IsOpen","prototype","Init","obj","parseInt","Math","random","toString","Date","now","ServerIP","Port","WebSocket","OnMessage","onmessage","e","console","log","data","d","JSON","parse","publish","MessageID","onopen","bind","OnClose","onclose","seft","$layer","alert","reason","title","icon","btn","layerid","close","CallFunction","ClassName","FunctionName","Data","CallBack","undefined","subscribe","Class","Function","readyState","jsonStr","stringify","send","Login","Password","email","password","Status","SetToken","accessToken","SetUserInfo","Logout","TOKEN","$cookies","set","CheckToken","callback","CKTK","get","CheckPermission","Url","Callback","swal","fire","toast","position","showConfirmButton","timer","event","push","unsubscribe","forEach","subscriberCallback","publishMoreTime","sleep","Millis","Promise","resolve","setTimeout"],"mappings":"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","sourcesContent":["class Client {\r\n  constructor(vue, onOpen) {\r\n    this.subscribers = {};\r\n    this.ClientID = \"\";\r\n    this.Vue = vue;\r\n    this.websocket = null;\r\n    this.UserInfo = {\r\n      ID: \"\",\r\n      Level: null,\r\n      UserName: \"\",\r\n      Email: \"\",\r\n    };\r\n    this.Token = null;\r\n    this.OnOpen = onOpen;\r\n    this.IsOpen = false;\r\n    Client.prototype.Init = function(obj) {\r\n      if (this.ClientID == \"\") {\r\n        this.ClientID =\r\n          \"CID\" +\r\n          parseInt(Math.random() * 99).toString() +\r\n          Date.now().toString();\r\n      }\r\n      if (obj.ServerIP && obj.Port) {\r\n        this.websocket = new WebSocket(`ws://${obj.ServerIP}:${obj.Port}`);\r\n        this.websocket.ClientID = this.ClientID;\r\n      }\r\n      if (obj.OnMessage) {\r\n        this.websocket.onmessage = obj.OnMessage;\r\n      } else {\r\n        this.websocket.onmessage = (e) => {\r\n          console.log(`Get>_${e.data}`);\r\n          var d = JSON.parse(e.data);\r\n          this.publish(d.MessageID, d);\r\n        };\r\n      }\r\n      if (obj.OnOpen) {\r\n        this.websocket.onopen = function(e) {\r\n          console.log(`onOpen:connetion open`);\r\n          obj.OnOpen(e);\r\n          this.IsOpen = true;\r\n        }.bind(this);\r\n      } else {\r\n        this.websocket.onopen = function() {\r\n          console.log(`onOpen:connetion open`);\r\n          this.IsOpen = true;\r\n        }.bind(this);\r\n      }\r\n      if (obj.OnClose) {\r\n        this.websocket.onclose = function() {\r\n          console.log(`onClose:connetion close`);\r\n          obj.OnClose();\r\n        };\r\n      } else {\r\n        let seft = this.Vue;\r\n        this.websocket.onclose = function(e) {\r\n          console.log(\"onClose:connetion close\");\r\n          seft.prototype.$layer.alert(\"The server connection close;\" + e.reason,{\r\n            title: 'Connetion close...',\r\n            icon:1 , //0,1,2,3\r\n            btn: ['OK'],\r\n          },layerid => {\r\n            seft.prototype.$layer.close(layerid);\r\n          }\r\n        );\r\n        };\r\n      }\r\n    };\r\n    Client.prototype.CallFunction = function(\r\n      ClassName,\r\n      FunctionName,\r\n      Data,\r\n      CallBack,\r\n      MessageID\r\n    ) {\r\n      MessageID = MessageID\r\n        ? MessageID\r\n        : \"MSGID\" +\r\n          parseInt(Math.random() * 99).toString() +\r\n          Date.now().toString();\r\n      if (CallBack != null && CallBack != undefined) {\r\n        this.subscribe(MessageID, function(d) {\r\n          CallBack(d);\r\n        });\r\n      }\r\n      var data = {\r\n        Token: this.Token,\r\n        ClientID: this.ClientID,\r\n        MessageID: MessageID,\r\n        Class: ClassName,\r\n        Function: FunctionName,\r\n        Data: Data,\r\n      };\r\n      if (this.websocket.readyState == 1) {\r\n        var jsonStr = JSON.stringify(data);\r\n        console.log(\"Send>_\" + jsonStr);\r\n        this.websocket.send(jsonStr);\r\n      } else {\r\n        console.log(\r\n          \"Error>_ WebSocket not ready,State:\" + this.websocket.readyState\r\n        );\r\n      }\r\n    };\r\n    Client.prototype.Login = function(Email, Password, CallBack) {\r\n      this.CallFunction(\r\n        \"UserManager\",\r\n        \"Login\",\r\n        { email: Email, password: Password },\r\n        function(e) {\r\n          if (e.Status == \"Pass\") {\r\n            this.SetToken(e.Data.accessToken);\r\n            this.SetUserInfo(e.Data.UserInfo);\r\n          }\r\n          CallBack(e);\r\n        }.bind(this)\r\n      );\r\n    };\r\n    Client.prototype.Logout = function(CallBack) {\r\n      this.CallFunction(\r\n        \"UserManager\",\r\n        \"Logout\",\r\n        { TOKEN: this.Token },\r\n        function(e) {\r\n          if (e.Status == \"Pass\") {\r\n            this.SetToken(null);\r\n            this.SetUserInfo(null);\r\n          }\r\n          CallBack(e);\r\n        }.bind(this)\r\n      );\r\n    };\r\n    Client.prototype.SetToken = function(Token) {\r\n      this.Token = Token;\r\n      this.Vue.$cookies.set(\"Token\", Token, \"1h\");\r\n    };\r\n    Client.prototype.SetUserInfo = function(UserInfo) {\r\n      if (UserInfo) {\r\n        this.UserInfo.ID = UserInfo.ID;\r\n        this.UserInfo.UserName = UserInfo.UserName;\r\n        this.UserInfo.Email = UserInfo.Email;\r\n        this.UserInfo.Level = UserInfo.Level;\r\n      } else {\r\n        this.UserInfo.ID = null;\r\n        this.UserInfo.UserName = null;\r\n        this.UserInfo.Email = null;\r\n        this.UserInfo.Level = null;\r\n      }\r\n    };\r\n    Client.prototype.CheckToken = function(callback) {\r\n      var CKTK = this.Vue.$cookies.get(\"Token\");\r\n      this.CallFunction(\r\n        \"UserManager\",\r\n        \"CheckToken\",\r\n        { Token: CKTK },\r\n        function(e) {\r\n          if (e.Status == \"Pass\") {\r\n            this.SetToken(CKTK);\r\n            this.SetUserInfo(e.Data);\r\n          } else {\r\n            this.SetToken(null);\r\n            this.SetUserInfo(null);\r\n          }\r\n          callback(e);\r\n        }.bind(this)\r\n      );\r\n    };\r\n    Client.prototype.CheckPermission = function(Url, Callback) {\r\n      this.CallFunction(\r\n        \"UserManager\",\r\n        \"CheckPermission\",\r\n        { UserName: this.UserInfo.UserName, Url: Url },\r\n        function(e) {\r\n          Callback(e);\r\n          if (e.Status == \"Fail\") {\r\n            this.Vue.swal.fire({\r\n              toast: true,\r\n              position: \"top-end\",\r\n              showConfirmButton: false,\r\n              timer: 1500,\r\n              icon: \"warning\",\r\n              title: \"Sorry, you don't have  permission\",\r\n            });\r\n          }\r\n        }.bind(this)\r\n      );\r\n    };\r\n    Client.prototype.subscribe = function(event, callback) {\r\n      if (!this.subscribers[event]) {\r\n        this.subscribers[event] = [];\r\n      }\r\n      this.subscribers[event].push(callback) - 1;\r\n    };\r\n    Client.prototype.unsubscribe = function(event) {\r\n      delete this.subscribers[event];\r\n    };\r\n    Client.prototype.publish = function(event, data) {\r\n      if (!this.subscribers[event]) return;\r\n      this.subscribers[event].forEach((subscriberCallback) =>\r\n        subscriberCallback(data)\r\n      );\r\n      delete this.subscribers[event];\r\n    };\r\n    Client.prototype.publishMoreTime = function(event, data) {\r\n      if (!this.subscribers[event]) return;\r\n      this.subscribers[event].forEach((subscriberCallback) =>\r\n        subscriberCallback(data)\r\n      );\r\n    };\r\n    Client.prototype.sleep = function(Millis) {\r\n      return new Promise((resolve) => setTimeout(resolve, Millis));\r\n    };\r\n\r\n    this.Init({ ServerIP: \"localhost\", Port: \"3000\", OnOpen: this.OnOpen });\r\n  }\r\n}\r\nexport default Client;\r\n"]}]}