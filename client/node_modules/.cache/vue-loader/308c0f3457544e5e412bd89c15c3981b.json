{"remainingRequest":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2021_Project\\Nodejs\\QRShop\\client\\src\\components\\RoleLayer.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\src\\components\\RoleLayer.vue","mtime":1622393275261},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGhlYWRlcnM6IFtdLCAvL2RhdGEgaGVhZGVyIGZvciB0YWJsZQ0KICAgICAgZGVzc2VydHM6IFtdLCAvL2RhdGEgc2hvdyBvbiB0YWJsZQ0KICAgICAgc2VsZWN0ZWQ6IFtdLCAvL2RhdGEgc2VsZWN0ZWQgZnJvbSB0YWJsZQ0KICAgICAgc2VhcmNoOiAiIiwNCiAgICAgIGRlbGV0ZUFjdGl2ZTogdHJ1ZSwNCiAgICAgIGl0ZW1zOiBbXSwgLy9kYXRhIGZvciBhdXRvY29tcGxldGUNCiAgICAgIHZhbHVlczogW10sIC8vZGF0YSBzZWxlY3RlZCBmcm9tIGF1dG9jb21wbGV0ZQ0KICAgICAgcm9sZV9uYW1lOiAiIiwNCiAgICAgIHJvbGVfZGVzY3JpYmU6ICIiLA0KICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICBmb3JtOiB7DQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICByZWdpb246ICIiLA0KICAgICAgICBkYXRlMTogIiIsDQogICAgICAgIGRhdGUyOiAiIiwNCiAgICAgICAgZGVsaXZlcnk6IGZhbHNlLA0KICAgICAgICB0eXBlOiBbXSwNCiAgICAgICAgcmVzb3VyY2U6ICIiLA0KICAgICAgICBkZXNjOiAiIiwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBsYXllcmlkOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAiIiwNCiAgICB9LA0KICAgIGlmcmFtZURhdGE6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsNCiAgICAgICAgcmV0dXJuIHt9Ow0KICAgICAgfSwNCiAgICB9LA0KICAgIGx5ZGF0YTogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdDogKCkgPT4gew0KICAgICAgICByZXR1cm4ge307DQogICAgICB9LA0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvKioNCiAgICAgKiBpbml0IGZpc3QgZGF0YSB3aGVuIG9wZW4gbGF5ZXINCiAgICAgKi8NCiAgICBpbml0OiBmdW5jdGlvbigpIHsNCiAgICAgIGlmICh0aGlzLmlmcmFtZURhdGEudHlwZSA9PSBgZWRpdGApIHsNCiAgICAgICAgdGhpcy5yb2xlX25hbWUgPSB0aGlzLmlmcmFtZURhdGEucm9sZS5yb2xlX25hbWU7DQogICAgICAgIHRoaXMucm9sZV9kZXNjcmliZSA9IHRoaXMuaWZyYW1lRGF0YS5yb2xlLnJvbGVfZGVzY3JpYmU7DQogICAgICAgIGxldCBhcnJheSA9IFtdOw0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaWZyYW1lRGF0YS5yb2xlLnByaXZpbGVnZS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGFycmF5LnB1c2godGhpcy5pZnJhbWVEYXRhLnJvbGUucHJpdmlsZWdlW2ldLl9pZCk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy52YWx1ZXMgPSBhcnJheTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKg0KICAgICAqIGNoYW5nZSB0YWJsZSBkYXRhIHdoZW4gYXV0b2NvbXBsZXRlIHNlbGVjdA0KICAgICAqIG9yIGZvbGxvdyBkYXRhIHBhc3MgZnJvbSByb2xlLnZ1ZSBwYWdlDQogICAgICovDQogICAgY2hhbmdlVGFibGVEYXRhOiBmdW5jdGlvbigpIHsNCiAgICAgIGxldCBhcnIgPSBbXTsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52YWx1ZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLml0ZW1zLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgaWYgKHRoaXMuaXRlbXNbal0uX2lkID09IHRoaXMudmFsdWVzW2ldKSBhcnIucHVzaCh0aGlzLml0ZW1zW2pdKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgdGhpcy5kZXNzZXJ0cyA9IGFycjsNCiAgICB9LA0KICAgIHNlbGVjdFJvdzogZnVuY3Rpb24oaXRlbSkgew0KICAgICAgbGV0IGFkZCA9IHRydWU7DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaWYgKGl0ZW0uX2lkID09IHRoaXMuc2VsZWN0ZWRbaV0uX2lkKSB7DQogICAgICAgICAgdGhpcy5zZWxlY3RlZC5zcGxpY2UoaSwgMSk7DQogICAgICAgICAgYWRkID0gZmFsc2U7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChhZGQpIHRoaXMuc2VsZWN0ZWQucHVzaChpdGVtKTsNCiAgICB9LA0KICAgIGZvcm1hdFRpbWU6IGZ1bmN0aW9uKGl0ZW0pIHsNCiAgICAgIHJldHVybiBuZXcgRGF0ZShpdGVtKS50b0xvY2FsZVN0cmluZygpOw0KICAgIH0sDQogICAgZGVsZXRlUHJpdmlsZWdlOiBmdW5jdGlvbigpIHsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWxlY3RlZC5sZW5ndGg7IGkrKykgew0KICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMudmFsdWVzLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgaWYgKHRoaXMudmFsdWVzW2pdID09IHRoaXMuc2VsZWN0ZWRbaV0uX2lkKSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlcy5zcGxpY2UoaiwgMSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLnNlbGVjdGVkID0gW107DQogICAgfSwNCiAgICBzYXZlUm9sZTogYXN5bmMgZnVuY3Rpb24oKSB7DQogICAgICAvLyB0aGlzLiRwYXJlbnQuJGRhdGEuaWZyYW1lRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZm9ybSk7DQogICAgICAvLyB0aGlzLmx5ZGF0YS5pZnJhbWVEYXRhID0gT2JqZWN0LmFzc2lnbih0aGlzLmx5ZGF0YS5pZnJhbWVEYXRhLCB0aGlzLmZvcm0pOw0KICAgICAgLy8gdGhpcy4kbGF5ZXIubXNnKCLmiJDlip8iKTsNCiAgICAgIHRyeSB7DQogICAgICAgIHRoaXMubG9hZGluZz10cnVlOw0KICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICAgIHRoaXMuJGNsaWVudC5DYWxsRnVuY3Rpb24oDQogICAgICAgICAgICAiUm9sZU1hbmFnZXIiLA0KICAgICAgICAgICAgIkluc2VydCIsDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIHJvbGVfbmFtZTogdGhpcy5yb2xlX25hbWUsDQogICAgICAgICAgICAgIHJvbGVfZGVzY3JpYmU6IHRoaXMucm9sZV9kZXNjcmliZSwNCiAgICAgICAgICAgICAgcHJpdmlsZWdlOiB0aGlzLnZhbHVlcw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgICAgICAgaWYgKGUuU3RhdHVzID09ICJQYXNzIikgcmVzb2x2ZShlKTsNCiAgICAgICAgICAgICAgZWxzZSByZWplY3QoZS5NZXNzYWdlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICApOw0KICAgICAgICB9KTsNCiAgICAgICAgaWYocmVzdWx0KXsNCiAgICAgICAgICB0aGlzLiRsYXllci5tc2coZS5NZXNzYWdlKTsNCiAgICAgICAgICB0aGlzLiRsYXllci5jbG9zZSh0aGlzLmxheWVyaWQpOw0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgdGhpcy4kbGF5ZXIubXNnKGVycik7DQogICAgICB9IGZpbmFsbHkgew0KICAgICAgICB0aGlzLmxvYWRpbmc9ZmFsc2U7DQogICAgICB9DQogICAgfSwNCiAgICBjYW5jZWwoKSB7DQogICAgICB0aGlzLiRsYXllci5jbG9zZSh0aGlzLmxheWVyaWQpOw0KICAgIH0sDQogICAgcXV4aWFvKCkgew0KICAgICAgdGhpcy4kbGF5ZXIuY2xvc2UodGhpcy5sYXllcmlkKTsNCiAgICB9LA0KICB9LA0KICBtb3VudGVkOiBhc3luYyBmdW5jdGlvbigpIHsNCiAgICB0cnkgew0KICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgdGhpcy4kY2xpZW50LkNhbGxGdW5jdGlvbigiUHJpdmlsZWdlTWFuYWdlciIsICJHZXRBbGwiLCB7fSwgZnVuY3Rpb24oDQogICAgICAgICAgZQ0KICAgICAgICApIHsNCiAgICAgICAgICBpZiAoZS5TdGF0dXMgPT0gIlBhc3MiKSByZXNvbHZlKGUuRGF0YSk7DQogICAgICAgICAgZWxzZSByZWplY3QoZS5NZXNzYWdlKTsNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLmhlYWRlcnMgPSBbDQogICAgICAgICAgeyB0ZXh0OiAiUHJpdmlsZWdlIE5hbWUiLCB2YWx1ZTogInByaXZpbGVnZV9uYW1lIiB9LA0KICAgICAgICAgIHsgdGV4dDogIkRlc2NyaWJlIiwgdmFsdWU6ICJwcml2aWxlZ2VfZGVzYyIgfSwNCiAgICAgICAgICB7IHRleHQ6ICJUYXJnZXQgVXJsIiwgdmFsdWU6ICJ1cmwiIH0sDQogICAgICAgICAgeyB0ZXh0OiAiRWRpdCBUaW1lIiwgdmFsdWU6ICJlZGl0X3RpbWUiLCBmb3JtYXR0ZXI6IHRoaXMuZm9ybWF0VGltZSB9LA0KICAgICAgICBdOw0KICAgICAgICB0aGlzLml0ZW1zID0gcmVzdWx0Ow0KICAgICAgICB0aGlzLmluaXQoKTsNCiAgICAgIH0NCiAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgIHRoaXMuJHN3YWwuZmlyZSgNCiAgICAgICAgew0KICAgICAgICAgIGljb246ICJlcnJvciIsDQogICAgICAgICAgdGV4dDogZXJyLA0KICAgICAgICB9LA0KICAgICAgICBmdW5jdGlvbigpIHt9DQogICAgICApOw0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBpZnJhbWVEYXRhOiB7DQogICAgICBoYW5kbGVyOiBmdW5jdGlvbigpIHsNCiAgICAgICAgdGhpcy5mb3JtID0gdGhpcy5pZnJhbWVEYXRhOw0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUsDQogICAgfSwNCiAgICBzZWxlY3RlZDogew0KICAgICAgaGFuZGxlcjogZnVuY3Rpb24oKSB7DQogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkLmxlbmd0aCA+IDApIHRoaXMuZGVsZXRlQWN0aXZlID0gZmFsc2U7DQogICAgICAgIGVsc2UgdGhpcy5kZWxldGVBY3RpdmUgPSB0cnVlOw0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUsDQogICAgfSwNCiAgICB2YWx1ZXM6IHsNCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCkgew0KICAgICAgICB0aGlzLmNoYW5nZVRhYmxlRGF0YSgpOw0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUsDQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["RoleLayer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RoleLayer.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div style=\"\">\r\n    <v-app>\r\n      <v-card class=\"mx-auto\" outlined>\r\n        <v-card-title> </v-card-title>\r\n        <v-list-item three-line>\r\n          <v-form>\r\n            <v-container>\r\n              <v-row>\r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <v-text-field\r\n                    v-model=\"role_name\"\r\n                    label=\"Name\"\r\n                    outlined\r\n                    dense\r\n                    required\r\n                  ></v-text-field>\r\n                </v-col>\r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <v-text-field\r\n                    v-model=\"role_describe\"\r\n                    label=\"Describe\"\r\n                    outlined\r\n                    dense\r\n                  ></v-text-field>\r\n                </v-col>\r\n                <v-col cols=\"12\">\r\n                  <v-autocomplete\r\n                    v-model=\"values\"\r\n                    :items=\"items\"\r\n                    :menu-props=\"{\r\n                      closeOnClick: true,\r\n                      closeOnContentClick: true,\r\n                    }\"\r\n                    item-text=\"privilege_name\"\r\n                    item-value=\"_id\"\r\n                    outlined\r\n                    dense\r\n                    chips\r\n                    small-chips\r\n                    label=\"Privilege\"\r\n                    multiple\r\n                  ></v-autocomplete>\r\n                </v-col>\r\n              </v-row>\r\n              <v-row>\r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <b-button-toolbar class=\"\" aria-label=\"\">\r\n                    <b-button-group size=\"\" class=\"mr-1\">\r\n                      <b-button\r\n                        variant=\"outline-primary\"\r\n                        :disabled=\"deleteActive\"\r\n                        @click=\"deletePrivilege\"\r\n                        ><i\r\n                          class=\"mdi mdi-delete-forever\"\r\n                          aria-hidden=\"true\"\r\n                        ></i\r\n                        >Delete</b-button\r\n                      >\r\n                    </b-button-group>\r\n                  </b-button-toolbar>\r\n                </v-col>\r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <v-text-field\r\n                    append-icon=\"mdi-magnify\"\r\n                    label=\"Search\"\r\n                    outlined\r\n                    dense\r\n                    hide-details\r\n                  ></v-text-field>\r\n                </v-col>\r\n              </v-row>\r\n            </v-container>\r\n          </v-form>\r\n        </v-list-item>\r\n        <v-card-actions>\r\n          <v-container>\r\n            <v-row>\r\n              <v-col cols=\"12\" md=\"12\">\r\n                <v-data-table\r\n                  v-model=\"selected\"\r\n                  :headers=\"headers\"\r\n                  :items=\"desserts\"\r\n                  :single-select=\"false\"\r\n                  item-key=\"_id\"\r\n                  show-select\r\n                  :search=\"search\"\r\n                  class=\"elevation-1\"\r\n                  @click:row=\"selectRow\"\r\n                >\r\n                  <template\r\n                    v-for=\"header in headers.filter((header) =>\r\n                      header.hasOwnProperty('formatter')\r\n                    )\"\r\n                    v-slot:[`item.${header.value}`]=\"{ header, value }\"\r\n                  >\r\n                    {{ header.formatter(value) }}\r\n                  </template>\r\n                </v-data-table>\r\n              </v-col>\r\n              <v-col cols=\"6\" md=\"6\">\r\n                <v-btn\r\n                  :loading=\"loading\"\r\n                  :disabled=\"loading\"\r\n                  outlined\r\n                  color=\"success\"\r\n                  class=\"ma-2 white--text\"\r\n                  @click=\"saveRole\"\r\n                >\r\n                  <v-icon left dark>\r\n                    mdi-arrow-down-thick\r\n                  </v-icon>\r\n                  Save\r\n                </v-btn>\r\n\r\n                <v-btn\r\n                  outlined\r\n                  color=\"blue-grey\"\r\n                  class=\"ma-2 white--text\"\r\n                  @click=\"cancel\"\r\n                >\r\n                  <v-icon left dark>\r\n                    mdi-close\r\n                  </v-icon>\r\n                  cancel\r\n                </v-btn>\r\n              </v-col>\r\n            </v-row>\r\n          </v-container>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-app>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      headers: [], //data header for table\r\n      desserts: [], //data show on table\r\n      selected: [], //data selected from table\r\n      search: \"\",\r\n      deleteActive: true,\r\n      items: [], //data for autocomplete\r\n      values: [], //data selected from autocomplete\r\n      role_name: \"\",\r\n      role_describe: \"\",\r\n      loading: false,\r\n      form: {\r\n        name: \"\",\r\n        region: \"\",\r\n        date1: \"\",\r\n        date2: \"\",\r\n        delivery: false,\r\n        type: [],\r\n        resource: \"\",\r\n        desc: \"\",\r\n      },\r\n    };\r\n  },\r\n  props: {\r\n    layerid: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    iframeData: {\r\n      type: Object,\r\n      default: () => {\r\n        return {};\r\n      },\r\n    },\r\n    lydata: {\r\n      type: Object,\r\n      default: () => {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    /**\r\n     * init fist data when open layer\r\n     */\r\n    init: function() {\r\n      if (this.iframeData.type == `edit`) {\r\n        this.role_name = this.iframeData.role.role_name;\r\n        this.role_describe = this.iframeData.role.role_describe;\r\n        let array = [];\r\n        for (let i = 0; i < this.iframeData.role.privilege.length; i++) {\r\n          array.push(this.iframeData.role.privilege[i]._id);\r\n        }\r\n        this.values = array;\r\n      }\r\n    },\r\n    /**\r\n     * change table data when autocomplete select\r\n     * or follow data pass from role.vue page\r\n     */\r\n    changeTableData: function() {\r\n      let arr = [];\r\n      for (let i = 0; i < this.values.length; i++) {\r\n        for (let j = 0; j < this.items.length; j++) {\r\n          if (this.items[j]._id == this.values[i]) arr.push(this.items[j]);\r\n        }\r\n      }\r\n      this.desserts = arr;\r\n    },\r\n    selectRow: function(item) {\r\n      let add = true;\r\n      for (let i = 0; i < this.selected.length; i++) {\r\n        if (item._id == this.selected[i]._id) {\r\n          this.selected.splice(i, 1);\r\n          add = false;\r\n          break;\r\n        }\r\n      }\r\n      if (add) this.selected.push(item);\r\n    },\r\n    formatTime: function(item) {\r\n      return new Date(item).toLocaleString();\r\n    },\r\n    deletePrivilege: function() {\r\n      for (let i = 0; i < this.selected.length; i++) {\r\n        for (let j = 0; j < this.values.length; j++) {\r\n          if (this.values[j] == this.selected[i]._id) {\r\n            this.values.splice(j, 1);\r\n          }\r\n        }\r\n      }\r\n      this.selected = [];\r\n    },\r\n    saveRole: async function() {\r\n      // this.$parent.$data.iframeData = Object.assign({}, this.form);\r\n      // this.lydata.iframeData = Object.assign(this.lydata.iframeData, this.form);\r\n      // this.$layer.msg(\"成功\");\r\n      try {\r\n        this.loading=true;\r\n        let result = await new Promise((resolve, reject) => {\r\n          this.$client.CallFunction(\r\n            \"RoleManager\",\r\n            \"Insert\",\r\n            {\r\n              role_name: this.role_name,\r\n              role_describe: this.role_describe,\r\n              privilege: this.values\r\n            },\r\n            function(e) {\r\n              if (e.Status == \"Pass\") resolve(e);\r\n              else reject(e.Message);\r\n            }\r\n          );\r\n        });\r\n        if(result){\r\n          this.$layer.msg(e.Message);\r\n          this.$layer.close(this.layerid);\r\n        }\r\n      } catch (err) {\r\n        this.$layer.msg(err);\r\n      } finally {\r\n        this.loading=false;\r\n      }\r\n    },\r\n    cancel() {\r\n      this.$layer.close(this.layerid);\r\n    },\r\n    quxiao() {\r\n      this.$layer.close(this.layerid);\r\n    },\r\n  },\r\n  mounted: async function() {\r\n    try {\r\n      let result = await new Promise((resolve, reject) => {\r\n        this.$client.CallFunction(\"PrivilegeManager\", \"GetAll\", {}, function(\r\n          e\r\n        ) {\r\n          if (e.Status == \"Pass\") resolve(e.Data);\r\n          else reject(e.Message);\r\n        });\r\n      });\r\n      if (result.length > 0) {\r\n        this.headers = [\r\n          { text: \"Privilege Name\", value: \"privilege_name\" },\r\n          { text: \"Describe\", value: \"privilege_desc\" },\r\n          { text: \"Target Url\", value: \"url\" },\r\n          { text: \"Edit Time\", value: \"edit_time\", formatter: this.formatTime },\r\n        ];\r\n        this.items = result;\r\n        this.init();\r\n      }\r\n    } catch (err) {\r\n      this.$swal.fire(\r\n        {\r\n          icon: \"error\",\r\n          text: err,\r\n        },\r\n        function() {}\r\n      );\r\n    }\r\n  },\r\n  watch: {\r\n    iframeData: {\r\n      handler: function() {\r\n        this.form = this.iframeData;\r\n      },\r\n      deep: true,\r\n      immediate: true,\r\n    },\r\n    selected: {\r\n      handler: function() {\r\n        if (this.selected.length > 0) this.deleteActive = false;\r\n        else this.deleteActive = true;\r\n      },\r\n      deep: true,\r\n      immediate: true,\r\n    },\r\n    values: {\r\n      handler: function() {\r\n        this.changeTableData();\r\n      },\r\n      deep: true,\r\n      immediate: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style></style>\r\n"]}]}