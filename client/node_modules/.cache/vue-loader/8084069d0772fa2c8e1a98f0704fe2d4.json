{"remainingRequest":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2021_Project\\Nodejs\\QRShop\\client\\src\\components\\Role.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\src\\components\\Role.vue","mtime":1622273040714},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJyb2xlIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZWRpdEFjdGl2ZTogdHJ1ZSwNCiAgICAgIGRlbGV0ZUFjdGl2ZTogdHJ1ZSwNCiAgICAgIGNoZWNrYm94OiB0cnVlLA0KICAgICAgc2luZ2xlU2VsZWN0OiBmYWxzZSwNCiAgICAgIHNlbGVjdGVkOiBbXSwNCiAgICAgIHNlYXJjaDogIiIsDQogICAgICBoZWFkZXJzOiBbXSwNCiAgICAgIGRlc3NlcnRzOiBbXSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgc2VsZWN0Um93OiBmdW5jdGlvbihpdGVtKSB7DQogICAgICBsZXQgYWRkID0gdHJ1ZTsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWxlY3RlZC5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAoaXRlbS5faWQgPT0gdGhpcy5zZWxlY3RlZFtpXS5faWQpIHsNCiAgICAgICAgICB0aGlzLnNlbGVjdGVkLnNwbGljZShpLCAxKTsNCiAgICAgICAgICBhZGQgPSBmYWxzZTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKGFkZCkgdGhpcy5zZWxlY3RlZC5wdXNoKGl0ZW0pOw0KICAgIH0sDQogICAgZm9ybWF0VGltZTogZnVuY3Rpb24oaXRlbSkgew0KICAgICAgcmV0dXJuIG5ldyBEYXRlKGl0ZW0pLnRvTG9jYWxlU3RyaW5nKCk7DQogICAgfSwNCiAgICBmb3JtYXRQcml2aWxlZ2U6IGZ1bmN0aW9uKGl0ZW0pIHsNCiAgICAgIGxldCBscCA9ICIiOw0KICAgICAgaWYgKGl0ZW0ubGVuZ3RoID4gMCkgew0KICAgICAgICBpdGVtLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgICBscCArPSBgJHtlbGVtZW50LnByaXZpbGVnZV9uYW1lfS9gOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBscCA9PSAiIiA/ICJOL0EiIDogbHA7DQogICAgICAvL3JldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCdidXR0b24nLGxwKQ0KICAgIH0sDQogICAgc2hvd0xheWVyOiBmdW5jdGlvbigpIHsNCiAgICAgIHRoaXMuJHN3YWwuZmlyZSgNCiAgICAgICAgICB7DQogICAgICAgICAgICBpY29uOiAiZXJyb3IiLA0KICAgICAgICAgICAgdGl0bGU6ICJMb2dpbiBGYWlsIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIGZ1bmN0aW9uKCkge30NCiAgICAgICAgKTsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMpOw0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQ6IGFzeW5jIGZ1bmN0aW9uKCkgew0KICAgIHRyeSB7DQogICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICB0aGlzLiRjbGllbnQuQ2FsbEZ1bmN0aW9uKCJSb2xlTWFuYWdlciIsICJHZXRBbGxSb2xlIiwge30sIGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgICBpZiAoZS5TdGF0dXMgPT0gIlBhc3MiKSByZXNvbHZlKGUuRGF0YSk7DQogICAgICAgICAgZWxzZSByZWplY3QoZS5NZXNzYWdlKTsNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLmhlYWRlcnMgPSBbDQogICAgICAgICAgeyB0ZXh0OiAiUm9sZSBOYW1lIiwgdmFsdWU6ICJyb2xlX25hbWUiIH0sDQogICAgICAgICAgeyB0ZXh0OiAiUm9sZSBEZXNjcmliZSIsIHZhbHVlOiAicm9sZV9kZXNjcmliZSIgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0ZXh0OiAiUHJpdmlsZWdlIiwNCiAgICAgICAgICAgIHZhbHVlOiAicHJpdmlsZWdlIiwNCiAgICAgICAgICAgIGZvcm1hdHRlcjogdGhpcy5mb3JtYXRQcml2aWxlZ2UsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7IHRleHQ6ICJFZGl0IFRpbWUiLCB2YWx1ZTogImVkaXRfdGltZSIsIGZvcm1hdHRlcjogdGhpcy5mb3JtYXRUaW1lIH0sDQogICAgICAgIF07DQogICAgICAgIHRoaXMuZGVzc2VydHMgPSByZXN1bHQ7DQogICAgICB9DQogICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICB0aGlzLiRzd2FsLmZpcmUoDQogICAgICAgIHsNCiAgICAgICAgICBpY29uOiAiZXJyb3IiLA0KICAgICAgICAgIHRleHQ6IGVyciwNCiAgICAgICAgfSwNCiAgICAgICAgZnVuY3Rpb24oKSB7fQ0KICAgICAgKTsNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgc2VsZWN0ZWQoKSB7DQogICAgICBpZiAodGhpcy5zZWxlY3RlZC5sZW5ndGggPT0gMSkgdGhpcy5lZGl0QWN0aXZlID0gZmFsc2U7DQogICAgICBlbHNlIHRoaXMuZWRpdEFjdGl2ZSA9IHRydWU7DQogICAgICBpZiAodGhpcy5zZWxlY3RlZC5sZW5ndGggPiAwKSB0aGlzLmRlbGV0ZUFjdGl2ZSA9IGZhbHNlOw0KICAgICAgZWxzZSB0aGlzLmRlbGV0ZUFjdGl2ZSA9IHRydWU7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["Role.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Role.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <card\r\n          type=\"light\"\r\n          shadow\r\n          scare=\"mb-3\"\r\n          headerClasses=\"bg-white\"\r\n          bodyClasses=\"px-lg-5 py-lg-5\"\r\n          class=\"border-0\"\r\n        >\r\n          <div slot=\"header\">\r\n            <h4>Role Manager</h4>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"col-md-6 col-sm-12 table-toolbar\">\r\n              <b-button-toolbar class=\"\" aria-label=\"\">\r\n                <b-button-group size=\"\" class=\"mr-1\">\r\n                  <b-button variant=\"outline-primary\"\r\n                    ><i class=\"mdi mdi-plus-thick\" aria-hidden=\"true\"></i\r\n                    >Add</b-button\r\n                  >\r\n                  <b-button\r\n                    variant=\"outline-primary\"\r\n                    :disabled=\"editActive\"\r\n                    @click=\"showLayer\"\r\n                    ><i class=\"mdi mdi-pencil\" aria-hidden=\"true\"></i\r\n                    >Edit</b-button\r\n                  >\r\n                  <b-button variant=\"outline-primary\" :disabled=\"deleteActive\"\r\n                    ><i class=\"mdi mdi-delete-forever\" aria-hidden=\"true\"></i\r\n                    >Delete</b-button\r\n                  >\r\n                </b-button-group>\r\n              </b-button-toolbar>\r\n            </div>\r\n            <div class=\"col-md-6 col-sm-12 \">\r\n              <v-text-field\r\n                v-model=\"search\"\r\n                append-icon=\"mdi-magnify\"\r\n                label=\"Search\"\r\n                single-line\r\n                hide-details\r\n              ></v-text-field>\r\n            </div>\r\n            <div class=\"col-12\">\r\n              <!-- <b-table\r\n                striped\r\n                hover\r\n                :items=\"items\"\r\n                :fields=\"fields\"\r\n                :select-mode=\"true\"\r\n                responsive=\"sm\"\r\n                ref=\"selectableTable\"\r\n                selectable\r\n                @row-selected=\"onRowSelected\"\r\n              >\r\n                <template #cell(selected)=\"{item}\">\r\n                  <b-form-checkbox\r\n                    v-model=\"selected\"\r\n                    :value=\"item\"\r\n                    name=\"checkbox-1\"\r\n                    @click.stop.native=\"selectThisRow\"\r\n                  >\r\n                  </b-form-checkbox>\r\n                </template>\r\n              </b-table> -->\r\n              <v-data-table\r\n                checkbox-color=\"#000\"\r\n                v-model=\"selected\"\r\n                :headers=\"headers\"\r\n                :items=\"desserts\"\r\n                :single-select=\"singleSelect\"\r\n                item-key=\"_id\"\r\n                show-select\r\n                :search=\"search\"\r\n                class=\"elevation-1\"\r\n                @click:row=\"selectRow\"\r\n              >\r\n                <template\r\n                  v-for=\"header in headers.filter((header) =>\r\n                    header.hasOwnProperty('formatter')\r\n                  )\"\r\n                  v-slot:[`item.${header.value}`]=\"{ header, value }\"\r\n                >\r\n                  {{ header.formatter(value) }}\r\n                </template>\r\n                <!-- <template v-slot:item.edit_time=\"{ item }\">\r\n                  <span>{{ }}</span>\r\n                </template> -->\r\n                <!-- <template v-slot:item.privilege=\"{ item }\">\r\n                  <b-button variant=\"outline-primary\" @click=\"test(item)\"\r\n                    ><i class=\"mdi mdi-plus-thick\" aria-hidden=\"true\"></i\r\n                    >Add</b-button\r\n                  >\r\n                </template> -->\r\n                <!-- <template v-slot:top>\r\n                  <v-switch\r\n                    v-model=\"singleSelect\"\r\n                    label=\"Single select\"\r\n                    class=\"pa-3\"\r\n                  ></v-switch>\r\n                </template> -->\r\n              </v-data-table>\r\n            </div>\r\n          </div>\r\n        </card>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"role\",\r\n  data() {\r\n    return {\r\n      editActive: true,\r\n      deleteActive: true,\r\n      checkbox: true,\r\n      singleSelect: false,\r\n      selected: [],\r\n      search: \"\",\r\n      headers: [],\r\n      desserts: [],\r\n    };\r\n  },\r\n  methods: {\r\n    selectRow: function(item) {\r\n      let add = true;\r\n      for (let i = 0; i < this.selected.length; i++) {\r\n        if (item._id == this.selected[i]._id) {\r\n          this.selected.splice(i, 1);\r\n          add = false;\r\n          break;\r\n        }\r\n      }\r\n      if (add) this.selected.push(item);\r\n    },\r\n    formatTime: function(item) {\r\n      return new Date(item).toLocaleString();\r\n    },\r\n    formatPrivilege: function(item) {\r\n      let lp = \"\";\r\n      if (item.length > 0) {\r\n        item.forEach((element) => {\r\n          lp += `${element.privilege_name}/`;\r\n        });\r\n      }\r\n      return lp == \"\" ? \"N/A\" : lp;\r\n      //return this.$createElement('button',lp)\r\n    },\r\n    showLayer: function() {\r\n      this.$swal.fire(\r\n          {\r\n            icon: \"error\",\r\n            title: \"Login Fail\",\r\n          },\r\n          function() {}\r\n        );\r\n      console.log(this);\r\n    },\r\n  },\r\n  mounted: async function() {\r\n    try {\r\n      let result = await new Promise((resolve, reject) => {\r\n        this.$client.CallFunction(\"RoleManager\", \"GetAllRole\", {}, function(e) {\r\n          if (e.Status == \"Pass\") resolve(e.Data);\r\n          else reject(e.Message);\r\n        });\r\n      });\r\n      if (result.length > 0) {\r\n        this.headers = [\r\n          { text: \"Role Name\", value: \"role_name\" },\r\n          { text: \"Role Describe\", value: \"role_describe\" },\r\n          {\r\n            text: \"Privilege\",\r\n            value: \"privilege\",\r\n            formatter: this.formatPrivilege,\r\n          },\r\n          { text: \"Edit Time\", value: \"edit_time\", formatter: this.formatTime },\r\n        ];\r\n        this.desserts = result;\r\n      }\r\n    } catch (err) {\r\n      this.$swal.fire(\r\n        {\r\n          icon: \"error\",\r\n          text: err,\r\n        },\r\n        function() {}\r\n      );\r\n    }\r\n  },\r\n  watch: {\r\n    selected() {\r\n      if (this.selected.length == 1) this.editActive = false;\r\n      else this.editActive = true;\r\n      if (this.selected.length > 0) this.deleteActive = false;\r\n      else this.deleteActive = true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.main-panel .content {\r\n  padding: 80px 30px 30px 280px;\r\n  min-height: calc(100vh - 70px);\r\n}\r\n@media screen and (max-width: 991px) {\r\n  .main-panel .content {\r\n    padding-left: 30px;\r\n  }\r\n}\r\n/*\r\ntable {\r\n  color: #fff;\r\n}*/\r\n/* .table {\r\n  box-shadow: 5px 5px 5px darkgray;\r\n  border-radius: 5px;\r\n}  */\r\n/* \r\n.table thead {\r\n  background-color: #0e9aa7;\r\n}\r\n*/\r\n.table-toolbar {\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: flex-end;\r\n  -ms-flex-align: flex-end;\r\n  align-items: flex-end;\r\n}\r\n</style>\r\n"]}]}