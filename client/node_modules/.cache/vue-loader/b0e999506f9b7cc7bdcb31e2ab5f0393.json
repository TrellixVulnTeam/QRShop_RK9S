{"remainingRequest":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2021_Project\\Nodejs\\QRShop\\client\\src\\components\\Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\src\\components\\Users.vue","mtime":1622476924954},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2021_Project\\Nodejs\\QRShop\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVXNlckxheWVyIGZyb20gIi4vTGF5ZXJzL1VzZXJMYXllci52dWUiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAicm9sZSIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGVkaXRBY3RpdmU6IHRydWUsDQogICAgICBkZWxldGVBY3RpdmU6IHRydWUsDQogICAgICBjaGVja2JveDogdHJ1ZSwNCiAgICAgIHNpbmdsZVNlbGVjdDogZmFsc2UsDQogICAgICBzZWxlY3RlZDogW10sDQogICAgICBzZWFyY2g6ICIiLA0KICAgICAgaGVhZGVyczogW10sDQogICAgICBkZXNzZXJ0czogW10sDQogICAgICBpZnJhbWVEYXRhOiB7DQogICAgICAgIHVzZXI6IFtdLA0KICAgICAgICBpc0NoYW5nZTogZmFsc2UsDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzZWxlY3RSb3c6IGZ1bmN0aW9uKGl0ZW0pIHsNCiAgICAgIGxldCBhZGQgPSB0cnVlOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlbGVjdGVkLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmIChpdGVtLl9pZCA9PSB0aGlzLnNlbGVjdGVkW2ldLl9pZCkgew0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWQuc3BsaWNlKGksIDEpOw0KICAgICAgICAgIGFkZCA9IGZhbHNlOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoYWRkKSB0aGlzLnNlbGVjdGVkLnB1c2goaXRlbSk7DQogICAgfSwNCiAgICBmb3JtYXRUaW1lOiBmdW5jdGlvbihpdGVtKSB7DQogICAgICByZXR1cm4gbmV3IERhdGUoaXRlbSkudG9Mb2NhbGVTdHJpbmcoKTsNCiAgICB9LA0KICAgIGZvcm1hdFByaXZpbGVnZTogZnVuY3Rpb24oaXRlbSkgew0KICAgICAgbGV0IGxwID0gIiI7DQogICAgICBpZiAoaXRlbS5sZW5ndGggPiAwKSB7DQogICAgICAgIGl0ZW0uZm9yRWFjaCgoZWxlbWVudCkgPT4gew0KICAgICAgICAgIGxwICs9IGAke2VsZW1lbnQucHJpdmlsZWdlX25hbWV9L2A7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGxwID09ICIiID8gIk4vQSIgOiBscDsNCiAgICB9LA0KICAgIGxvYWREYXRhVG9UYWJsZTogYXN5bmMgZnVuY3Rpb24odXJuKSB7DQogICAgICB0cnkgew0KICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICAgIHRoaXMuJGNsaWVudC5DYWxsRnVuY3Rpb24oDQogICAgICAgICAgICAiUm9sZU1hbmFnZXIiLA0KICAgICAgICAgICAgIkdldFVzZXJSb2xlIiwNCiAgICAgICAgICAgIHVybiA/IHsgdXNlcm5hbWU6IHVybiB9IDoge30sDQogICAgICAgICAgICBmdW5jdGlvbihlKSB7DQogICAgICAgICAgICAgIGlmIChlLlN0YXR1cyA9PSAiUGFzcyIpIHJlc29sdmUoZS5EYXRhKTsNCiAgICAgICAgICAgICAgZWxzZSByZWplY3QoZS5NZXNzYWdlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICApOw0KICAgICAgICB9KTsNCiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhpcy5oZWFkZXJzID0gWw0KICAgICAgICAgICAgeyB0ZXh0OiAiVXNlciBOYW1lIiwgdmFsdWU6ICJ1c2VybmFtZSIgfSwNCiAgICAgICAgICAgIHsgdGV4dDogIkZ1bGwgTmFtZSIsIHZhbHVlOiAiZnVsbF9uYW1lIiB9LA0KICAgICAgICAgICAgeyB0ZXh0OiAiRW1haWwiLCB2YWx1ZTogImVtYWlsIiB9LA0KICAgICAgICAgICAgeyB0ZXh0OiAiQWRkcmVzcyIsIHZhbHVlOiAiYWRkcmVzcyIgfSwNCiAgICAgICAgICAgIHsgdGV4dDogIlJvbGUiLCB2YWx1ZTogInJvbGUiIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIHRleHQ6ICJFZGl0IFRpbWUiLA0KICAgICAgICAgICAgICB2YWx1ZTogImVkaXRfdGltZSIsDQogICAgICAgICAgICAgIGZvcm1hdHRlcjogdGhpcy5mb3JtYXRUaW1lLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICBdOw0KICAgICAgICAgIHRoaXMuZGVzc2VydHMgPSByZXN1bHQ7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW4ndCBiZSBmb3VuZCBhbnkgdXNlciIpOw0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgdGhpcy4kbGF5ZXIubXNnKGVycik7DQogICAgICB9DQogICAgfSwNCiAgICBzZWFyY2hVc2VyOiBhc3luYyBmdW5jdGlvbigpIHsNCiAgICAgIHRoaXMubG9hZERhdGFUb1RhYmxlKHRoaXMuc2VhcmNoKTsNCiAgICB9LA0KICAgIHNob3dSb2xlOiBmdW5jdGlvbihpdGVtKSB7DQogICAgICBsZXQgcmwgPSAiIjsNCiAgICAgIGlmIChpdGVtLmxlbmd0aCA+IDApIHsNCiAgICAgICAgaXRlbS5mb3JFYWNoKChlbGVtZW50KSA9PiB7DQogICAgICAgICAgcmwgKz0gYCR7ZWxlbWVudC5yb2xlX25hbWV9L2A7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHJsID09ICIiID8gIk4vQSIgOiBybDsNCiAgICB9LA0KICAgIHNob3dMYXllcjogZnVuY3Rpb24oKSB7DQogICAgICBsZXQgdXNlciA9IHRoaXMuc2VsZWN0ZWRbMF07DQogICAgICB0aGlzLmlmcmFtZURhdGEudXNlciA9IHVzZXI7DQogICAgICB0aGlzLmlmcmFtZURhdGEuaXNDaGFuZ2UgPSBmYWxzZTsNCiAgICAgIHRoaXMuJGxheWVyLmlmcmFtZSh7DQogICAgICAgIGNvbnRlbnQ6IHsNCiAgICAgICAgICBjb250ZW50OiBVc2VyTGF5ZXIsDQogICAgICAgICAgcGFyZW50OiB0aGlzLA0KICAgICAgICAgIGRhdGE6IHsgaWZyYW1lRGF0YTogdGhpcy5pZnJhbWVEYXRhIH0sDQogICAgICAgIH0sDQogICAgICAgIGFyZWE6IFt0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQueHMgPyAiMTAwJSIgOiAiYXV0byIsICIxMDAlIl0sDQogICAgICAgIHNjcm9sbGJhcjogdHJ1ZSwNCiAgICAgICAgdGl0bGU6IGBBZGQgcm9sZSB0byBbJHt1c2VyLnVzZXJuYW1lfV1gLA0KICAgICAgICBtYXhtaW46IHRydWUsDQogICAgICAgIHNoYWRlOiB0cnVlLA0KICAgICAgICBzaGFkZUNsb3NlOiBmYWxzZSwNCiAgICAgICAgY2FuY2VsOiAoKSA9PiB7fSwNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZGVsZXRlUm9sZTogYXN5bmMgZnVuY3Rpb24oKSB7DQogICAgICBsZXQgY29tZmlybSA9IHt9Ow0KICAgICAgdHJ5IHsNCiAgICAgICAgbGV0IGxpc3RJRCA9IFtdOw0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBsaXN0SUQucHVzaCh0aGlzLnNlbGVjdGVkW2ldLl9pZCk7DQogICAgICAgIH0NCiAgICAgICAgY29tZmlybSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7DQogICAgICAgICAgdGhpcy4kbGF5ZXIuY29uZmlybSgNCiAgICAgICAgICAgIGBBcmUgeW91IHN1cmUgdG8gZGVsZXRlICR7bGlzdElELmxlbmd0aH0gcmVjb3Jk77yfYCwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgdGl0bGU6ICJDb25maXJtIGRlbGV0ZSIsDQogICAgICAgICAgICAgIGJ0bjogWyJZZXMiLCAiTm8iXSwNCiAgICAgICAgICAgICAgaWNvbjogMywNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAobGF5ZXJpZCkgPT4gew0KICAgICAgICAgICAgICByZXNvbHZlKHsgeWVzOiB0cnVlLCBsYXllcklEOiBsYXllcmlkIH0pOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIChsYXllcmlkKSA9PiB7DQogICAgICAgICAgICAgIHJlc29sdmUoeyB5ZXM6IGZhbHNlLCBsYXllcklEOiBsYXllcmlkIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICk7DQogICAgICAgIH0pOw0KICAgICAgICBpZiAoY29tZmlybS55ZXMpIHsNCiAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICAgICAgdGhpcy4kY2xpZW50LkNhbGxGdW5jdGlvbigNCiAgICAgICAgICAgICAgIlJvbGVNYW5hZ2VyIiwNCiAgICAgICAgICAgICAgIkRlbGV0ZSIsDQogICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZDogbGlzdElELA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7DQogICAgICAgICAgICAgICAgaWYgKGUuU3RhdHVzID09ICJQYXNzIikgcmVzb2x2ZShlKTsNCiAgICAgICAgICAgICAgICBlbHNlIHJlamVjdChlLk1lc3NhZ2UpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICApOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGlmIChyZXN1bHQpIHsNCiAgICAgICAgICAgIHRoaXMuJGxheWVyLm1zZyhyZXN1bHQuTWVzc2FnZSk7DQogICAgICAgICAgICB0aGlzLmxvYWREYXRhVG9UYWJsZSgpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgIHRoaXMuJGxheWVyLm1zZyhlcnIpOw0KICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgdGhpcy4kbGF5ZXIuY2xvc2UoY29tZmlybS5sYXllcklEKTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBtb3VudGVkOiBhc3luYyBmdW5jdGlvbigpIHsNCiAgICB0aGlzLmxvYWREYXRhVG9UYWJsZSgpOw0KICB9LA0KICB3YXRjaDogew0KICAgIHNlbGVjdGVkKCkgew0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQubGVuZ3RoID09IDEpIHRoaXMuZWRpdEFjdGl2ZSA9IGZhbHNlOw0KICAgICAgZWxzZSB0aGlzLmVkaXRBY3RpdmUgPSB0cnVlOw0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQubGVuZ3RoID4gMCkgdGhpcy5kZWxldGVBY3RpdmUgPSBmYWxzZTsNCiAgICAgIGVsc2UgdGhpcy5kZWxldGVBY3RpdmUgPSB0cnVlOw0KICAgIH0sDQogICAgImlmcmFtZURhdGEuaXNDaGFuZ2UiOiB7DQogICAgICBoYW5kbGVyOiBmdW5jdGlvbigpIHsNCiAgICAgICAgdGhpcy5sb2FkRGF0YVRvVGFibGUoKTsNCiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IFtdOw0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IGZhbHNlLA0KICAgIH0sDQogIH0sDQogIGNvbXB1dGVkOiB7fSwNCn07DQo="},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Users.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <v-app>\r\n      <v-card elevation=\"2\" outlined>\r\n        <v-card-title> <h4>User Role</h4></v-card-title>\r\n        <v-list-item three-line>\r\n          <v-form onSubmit=\"return false;\">\r\n            <v-container>\r\n              <v-row>\r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <b-button\r\n                    variant=\"outline-primary\"\r\n                    :disabled=\"editActive\"\r\n                    @click=\"showLayer\"\r\n                    ><i class=\"mdi mdi-plus-thick\" aria-hidden=\"true\"></i\r\n                    >Add</b-button\r\n                  >\r\n                </v-col>\r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <v-text-field\r\n                    v-model=\"search\"\r\n                    append-icon=\"mdi-magnify\"\r\n                    label=\"Enter to search\"\r\n                    outlined\r\n                    dense\r\n                    hide-details\r\n                    v-on:keyup.enter=\"searchUser\"\r\n                  ></v-text-field>\r\n                </v-col>\r\n              </v-row>\r\n              <v-row> </v-row>\r\n            </v-container>\r\n          </v-form>\r\n        </v-list-item>\r\n        <v-card-actions>\r\n          <v-container>\r\n            <v-row>\r\n              <v-col cols=\"12\">\r\n                <v-data-table\r\n                  checkbox-color=\"#000\"\r\n                  data-table-border-radius\r\n                  v-model=\"selected\"\r\n                  :headers=\"headers\"\r\n                  :items=\"desserts\"\r\n                  :single-select=\"singleSelect\"\r\n                  item-key=\"_id\"\r\n                  show-select\r\n                  class=\"elevation-1\"\r\n                  @click:row=\"selectRow\"\r\n                  elevation=\"5\"\r\n                >\r\n                  <template #item.full_name=\"{ item }\"\r\n                    >{{ item.first_name }} {{ item.last_name }}</template\r\n                  >\r\n                  <template\r\n                    v-for=\"header in headers.filter((header) =>\r\n                      header.hasOwnProperty('formatter')\r\n                    )\"\r\n                    v-slot:[`item.${header.value}`]=\"{ header, value }\"\r\n                  >\r\n                    {{ header.formatter(value) }}\r\n                  </template>\r\n                  <template v-slot:item.role=\"{ item }\">\r\n                    <v-tooltip left>\r\n                      <template v-slot:activator=\"{ on, attrs }\">\r\n                        <v-btn\r\n                          v-bind=\"attrs\"\r\n                          v-on=\"on\"\r\n                          color=\"warning\"\r\n                          x-small\r\n                          fab\r\n                          dark\r\n                        >\r\n                          <v-icon>mdi-account-circle</v-icon>\r\n                        </v-btn>\r\n                      </template>\r\n                      <span>{{ showRole(item.role) }}</span>\r\n                    </v-tooltip>\r\n                    <!-- <v-chip :color=\"gren\" dark>\r\n                      {{ item.role }}\r\n                    </v-chip> -->\r\n                  </template>\r\n                </v-data-table>\r\n              </v-col>\r\n            </v-row>\r\n          </v-container>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-app>\r\n  </div>\r\n</template>\r\n<script>\r\nimport UserLayer from \"./Layers/UserLayer.vue\";\r\nexport default {\r\n  name: \"role\",\r\n  data() {\r\n    return {\r\n      editActive: true,\r\n      deleteActive: true,\r\n      checkbox: true,\r\n      singleSelect: false,\r\n      selected: [],\r\n      search: \"\",\r\n      headers: [],\r\n      desserts: [],\r\n      iframeData: {\r\n        user: [],\r\n        isChange: false,\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    selectRow: function(item) {\r\n      let add = true;\r\n      for (let i = 0; i < this.selected.length; i++) {\r\n        if (item._id == this.selected[i]._id) {\r\n          this.selected.splice(i, 1);\r\n          add = false;\r\n          break;\r\n        }\r\n      }\r\n      if (add) this.selected.push(item);\r\n    },\r\n    formatTime: function(item) {\r\n      return new Date(item).toLocaleString();\r\n    },\r\n    formatPrivilege: function(item) {\r\n      let lp = \"\";\r\n      if (item.length > 0) {\r\n        item.forEach((element) => {\r\n          lp += `${element.privilege_name}/`;\r\n        });\r\n      }\r\n      return lp == \"\" ? \"N/A\" : lp;\r\n    },\r\n    loadDataToTable: async function(urn) {\r\n      try {\r\n        let result = await new Promise((resolve, reject) => {\r\n          this.$client.CallFunction(\r\n            \"RoleManager\",\r\n            \"GetUserRole\",\r\n            urn ? { username: urn } : {},\r\n            function(e) {\r\n              if (e.Status == \"Pass\") resolve(e.Data);\r\n              else reject(e.Message);\r\n            }\r\n          );\r\n        });\r\n        if (result.length > 0) {\r\n          this.headers = [\r\n            { text: \"User Name\", value: \"username\" },\r\n            { text: \"Full Name\", value: \"full_name\" },\r\n            { text: \"Email\", value: \"email\" },\r\n            { text: \"Address\", value: \"address\" },\r\n            { text: \"Role\", value: \"role\" },\r\n            {\r\n              text: \"Edit Time\",\r\n              value: \"edit_time\",\r\n              formatter: this.formatTime,\r\n            },\r\n          ];\r\n          this.desserts = result;\r\n        } else {\r\n          throw new Error(\"Can't be found any user\");\r\n        }\r\n      } catch (err) {\r\n        this.$layer.msg(err);\r\n      }\r\n    },\r\n    searchUser: async function() {\r\n      this.loadDataToTable(this.search);\r\n    },\r\n    showRole: function(item) {\r\n      let rl = \"\";\r\n      if (item.length > 0) {\r\n        item.forEach((element) => {\r\n          rl += `${element.role_name}/`;\r\n        });\r\n      }\r\n      return rl == \"\" ? \"N/A\" : rl;\r\n    },\r\n    showLayer: function() {\r\n      let user = this.selected[0];\r\n      this.iframeData.user = user;\r\n      this.iframeData.isChange = false;\r\n      this.$layer.iframe({\r\n        content: {\r\n          content: UserLayer,\r\n          parent: this,\r\n          data: { iframeData: this.iframeData },\r\n        },\r\n        area: [this.$vuetify.breakpoint.xs ? \"100%\" : \"auto\", \"100%\"],\r\n        scrollbar: true,\r\n        title: `Add role to [${user.username}]`,\r\n        maxmin: true,\r\n        shade: true,\r\n        shadeClose: false,\r\n        cancel: () => {},\r\n      });\r\n    },\r\n    deleteRole: async function() {\r\n      let comfirm = {};\r\n      try {\r\n        let listID = [];\r\n        for (let i = 0; i < this.selected.length; i++) {\r\n          listID.push(this.selected[i]._id);\r\n        }\r\n        comfirm = await new Promise((resolve) => {\r\n          this.$layer.confirm(\r\n            `Are you sure to delete ${listID.length} record？`,\r\n            {\r\n              title: \"Confirm delete\",\r\n              btn: [\"Yes\", \"No\"],\r\n              icon: 3,\r\n            },\r\n            (layerid) => {\r\n              resolve({ yes: true, layerID: layerid });\r\n            },\r\n            (layerid) => {\r\n              resolve({ yes: false, layerID: layerid });\r\n            }\r\n          );\r\n        });\r\n        if (comfirm.yes) {\r\n          let result = await new Promise((resolve, reject) => {\r\n            this.$client.CallFunction(\r\n              \"RoleManager\",\r\n              \"Delete\",\r\n              {\r\n                id: listID,\r\n              },\r\n              function(e) {\r\n                if (e.Status == \"Pass\") resolve(e);\r\n                else reject(e.Message);\r\n              }\r\n            );\r\n          });\r\n          if (result) {\r\n            this.$layer.msg(result.Message);\r\n            this.loadDataToTable();\r\n          }\r\n        }\r\n      } catch (err) {\r\n        this.$layer.msg(err);\r\n      } finally {\r\n        this.$layer.close(comfirm.layerID);\r\n      }\r\n    },\r\n  },\r\n  mounted: async function() {\r\n    this.loadDataToTable();\r\n  },\r\n  watch: {\r\n    selected() {\r\n      if (this.selected.length == 1) this.editActive = false;\r\n      else this.editActive = true;\r\n      if (this.selected.length > 0) this.deleteActive = false;\r\n      else this.deleteActive = true;\r\n    },\r\n    \"iframeData.isChange\": {\r\n      handler: function() {\r\n        this.loadDataToTable();\r\n        this.selected = [];\r\n      },\r\n      deep: true,\r\n      immediate: false,\r\n    },\r\n  },\r\n  computed: {},\r\n};\r\n</script>\r\n<style>\r\n.main-panel .content {\r\n  padding: 80px 30px 30px 280px;\r\n  min-height: calc(100vh - 70px);\r\n}\r\n.v-application {\r\n  border-radius: 4px;\r\n  background: transparent;\r\n}\r\n@media screen and (max-width: 991px) {\r\n  .main-panel .content {\r\n    padding-left: 30px;\r\n  }\r\n}\r\n/*\r\ntable {\r\n  color: #fff;\r\n}*/\r\n/* .table {\r\n  box-shadow: 5px 5px 5px darkgray;\r\n  border-radius: 5px;\r\n}  */\r\n/* \r\n.table thead {\r\n  background-color: #0e9aa7;\r\n}\r\n*/\r\n.v-menu {\r\n  display: block;\r\n}\r\n.table-toolbar {\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: flex-end;\r\n  -ms-flex-align: flex-end;\r\n  align-items: flex-end;\r\n}\r\n.v-data-table {\r\n  border: 1px solid #dddddd;\r\n}\r\n\r\n/* .v-data-table td,th{\r\n    border-right: 1px solid #dddddd;\r\n} */\r\n</style>\r\n"]}]}